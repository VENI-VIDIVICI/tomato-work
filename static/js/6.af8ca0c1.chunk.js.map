{"version":3,"sources":["../node_modules/antd/es/divider/index.js","views/home/setting/account/index.tsx"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","Divider","props","React","ConfigConsumer","_ref","_classNames","getPrefixCls","direction","customizePrefixCls","prefixCls","_props$type","type","_props$orientation","orientation","className","children","dashed","plain","restProps","orientationPrefix","concat","hasChildren","classString","classNames","_defineProperty","_extends","role","connect","userInfo","user","withRouter","password","useFormInput","useState","sckey","setSckey","passwordValue","value","trim","handleUpdateUser","useCallback","message","warn","serviceUpdateUser","md5","handleSckey","serviceUpdateUserConfig","useEffect","serviceGetUserConfig","then","res","data","success","serverChanSckey","layout","style","width","Item","label","defaultValue","loginName","readOnly","disabled","maxLength","onClick","onChange","target","textAlign","marginTop","href","rel"],"mappings":"kHAAA,mEAGIA,EAAgC,SAAUC,EAAGC,GAC/C,IAAIC,EAAI,GAER,IAAK,IAAIC,KAAKH,EACRI,OAAOC,UAAUC,eAAeC,KAAKP,EAAGG,IAAMF,EAAEO,QAAQL,GAAK,IAAGD,EAAEC,GAAKH,EAAEG,IAG/E,GAAS,MAALH,GAAqD,oBAAjCI,OAAOK,sBAA2C,KAAIC,EAAI,EAAb,IAAgBP,EAAIC,OAAOK,sBAAsBT,GAAIU,EAAIP,EAAEQ,OAAQD,IAClIT,EAAEO,QAAQL,EAAEO,IAAM,GAAKN,OAAOC,UAAUO,qBAAqBL,KAAKP,EAAGG,EAAEO,MAAKR,EAAEC,EAAEO,IAAMV,EAAEG,EAAEO,KAEhG,OAAOR,GAuCMW,IAhCD,SAAiBC,GAC7B,OAAoBC,gBAAoBC,IAAgB,MAAM,SAAUC,GACtE,IAAIC,EAEAC,EAAeF,EAAKE,aACpBC,EAAYH,EAAKG,UAEjBC,EAAqBP,EAAMQ,UAC3BC,EAAcT,EAAMU,KACpBA,OAAuB,IAAhBD,EAAyB,aAAeA,EAC/CE,EAAqBX,EAAMY,YAC3BA,OAAqC,IAAvBD,EAAgC,SAAWA,EACzDE,EAAYb,EAAMa,UAClBC,EAAWd,EAAMc,SACjBC,EAASf,EAAMe,OACfC,EAAQhB,EAAMgB,MACdC,EAAYhC,EAAOe,EAAO,CAAC,YAAa,OAAQ,cAAe,YAAa,WAAY,SAAU,UAElGQ,EAAYH,EAAa,UAAWE,GACpCW,EAAoBN,EAAYf,OAAS,EAAI,IAAIsB,OAAOP,GAAeA,EACvEQ,IAAgBN,EAChBO,EAAcC,IAAWT,EAAWL,EAAW,GAAGW,OAAOX,EAAW,KAAKW,OAAOT,IAAQN,EAAc,GAAImB,IAAgBnB,EAAa,GAAGe,OAAOX,EAAW,cAAeY,GAAcG,IAAgBnB,EAAa,GAAGe,OAAOX,EAAW,cAAcW,OAAOD,GAAoBE,GAAcG,IAAgBnB,EAAa,GAAGe,OAAOX,EAAW,aAAcO,GAASQ,IAAgBnB,EAAa,GAAGe,OAAOX,EAAW,YAAaQ,GAAQO,IAAgBnB,EAAa,GAAGe,OAAOX,EAAW,QAAuB,QAAdF,GAAsBF,IACvgB,OAAoBH,gBAAoB,MAAOuB,IAAS,CACtDX,UAAWQ,GACVJ,EAAW,CACZQ,KAAM,cACJX,GAAyBb,gBAAoB,OAAQ,CACvDY,UAAW,GAAGM,OAAOX,EAAW,gBAC/BM,S,mKCqCQY,uBAJS,SAAC,GACvB,MAAO,CAAEC,SADoE,EAApDC,KACDD,YAGXD,CAAyBG,aArEe,YAAyB,IAAbF,EAAY,EAAZA,SAC3DG,EAAWC,YAAa,IAD+C,EAEnDC,mBAAS,IAF0C,mBAEtEC,EAFsE,KAE/DC,EAF+D,KAGvEC,EAAgBL,EAASM,MAAMC,OAE/BC,EAAmBC,uBAAY,WAC/BJ,EAActC,OAAS,EACzB2C,IAAQC,KAAK,mCAGfC,YAAkB,CAAEZ,SAAUa,IAAIR,OACjC,CAACA,IAEES,EAAcL,uBAAY,WACzBN,EAKLY,YAAwB,CAAEZ,UAJxBO,IAAQC,KAAK,yCAKd,CAACR,IAWJ,OATAa,qBAAU,WACRC,cACCC,MAAK,SAAAC,GACmB,IAAD,EAAlBA,EAAIC,KAAKC,SACXjB,GAAS,UAAAe,EAAIC,KAAKA,YAAT,eAAeE,kBAAmB,SAG9C,IAGD,yBAAKvC,UAAU,mBACb,kBAAC,IAAD,CAASD,YAAY,QAArB,4BACA,kBAAC,IAAD,CAAMyC,OAAO,WAAWC,MAAO,CAAEC,MAAO,UACtC,kBAAC,IAAKC,KAAN,CAAWC,MAAM,sBACf,kBAAC,IAAD,CAAOC,aAAc/B,EAASgC,UAAWC,UAAQ,EAACC,UAAQ,KAE5D,kBAAC,IAAKL,KAAN,CAAWC,MAAM,gBACf,kBAAC,IAAD,eAAO/C,KAAK,WAAWoD,UAAW,IAAQhC,KAE5C,kBAAC,IAAK0B,KAAN,KACE,kBAAC,IAAD,CAAQ9C,KAAK,UAAUqD,QAASzB,GAAhC,kBAGJ,kBAAC,IAAD,CAAS1B,YAAY,QAArB,4BACA,kBAAC,IAAD,CAAMyC,OAAO,WAAWC,MAAO,CAAEC,MAAO,UACtC,kBAAC,IAAKC,KAAN,CAAWC,MAAM,SACf,kBAAC,IAAD,CACEK,UAAW,IACX1B,MAAOH,EACP+B,SAAU,SAAA7E,GAAC,OAAI+C,EAAS/C,EAAE8E,OAAO7B,UAEnC,yBAAKkB,MAAO,CAAEY,UAAW,QAASC,UAAW,QAC3C,uBAAGC,KAAK,qBAAqBH,OAAO,SAASI,IAAI,uBAAjD,oCAGJ,kBAAC,IAAKb,KAAN,KACE,kBAAC,IAAD,CAAQ9C,KAAK,UAAUqD,QAASnB,GAAhC","file":"static/js/6.af8ca0c1.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Divider = function Divider(props) {\n  return /*#__PURE__*/React.createElement(ConfigConsumer, null, function (_ref) {\n    var _classNames;\n\n    var getPrefixCls = _ref.getPrefixCls,\n        direction = _ref.direction;\n\n    var customizePrefixCls = props.prefixCls,\n        _props$type = props.type,\n        type = _props$type === void 0 ? 'horizontal' : _props$type,\n        _props$orientation = props.orientation,\n        orientation = _props$orientation === void 0 ? 'center' : _props$orientation,\n        className = props.className,\n        children = props.children,\n        dashed = props.dashed,\n        plain = props.plain,\n        restProps = __rest(props, [\"prefixCls\", \"type\", \"orientation\", \"className\", \"children\", \"dashed\", \"plain\"]);\n\n    var prefixCls = getPrefixCls('divider', customizePrefixCls);\n    var orientationPrefix = orientation.length > 0 ? \"-\".concat(orientation) : orientation;\n    var hasChildren = !!children;\n    var classString = classNames(className, prefixCls, \"\".concat(prefixCls, \"-\").concat(type), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-text\"), hasChildren), _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-text\").concat(orientationPrefix), hasChildren), _defineProperty(_classNames, \"\".concat(prefixCls, \"-dashed\"), !!dashed), _defineProperty(_classNames, \"\".concat(prefixCls, \"-plain\"), !!plain), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames));\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      className: classString\n    }, restProps, {\n      role: \"separator\"\n    }), children && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-inner-text\")\n    }, children));\n  });\n};\n\nexport default Divider;","import React, { useCallback, useEffect, useState } from 'react';\nimport md5 from 'blueimp-md5';\nimport { connect } from 'react-redux';\nimport { StoreState } from '@/store';\nimport { UserInfoProps } from '@/store/reducers/user';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { useFormInput } from '@/hooks';\nimport { serviceUpdateUser, serviceGetUserConfig, serviceUpdateUserConfig } from '@/services';\nimport {\n  Form, Input, Button, message, Divider\n} from 'antd';\n\ntype Props = {\n  userInfo: UserInfoProps;\n}\n\nconst Account: React.FC<Props & RouteComponentProps> = function ({ userInfo }) {\n  const password = useFormInput('');\n  const [sckey, setSckey] = useState('');\n  const passwordValue = password.value.trim();\n\n  const handleUpdateUser = useCallback(() => {\n    if (passwordValue.length < 6) {\n      message.warn('密码至少6位');\n      return;\n    }\n    serviceUpdateUser({ password: md5(passwordValue) });\n  }, [passwordValue]);\n\n  const handleSckey = useCallback(() => {\n    if (!sckey) {\n      message.warn('请正确填写SCKEY');\n      return;\n    }\n\n    serviceUpdateUserConfig({ sckey });\n  }, [sckey]);\n\n  useEffect(() => {\n    serviceGetUserConfig()\n    .then(res => {\n      if (res.data.success) {\n        setSckey(res.data.data?.serverChanSckey || '');\n      }\n    });\n  }, []);\n\n  return (\n    <div className=\"account-setting\">\n      <Divider orientation=\"left\">修改密码</Divider>\n      <Form layout=\"vertical\" style={{ width: '300px' }}>\n        <Form.Item label=\"登录名\">\n          <Input defaultValue={userInfo.loginName} readOnly disabled />\n        </Form.Item>\n        <Form.Item label=\"密码\">\n          <Input type=\"password\" maxLength={32} {...password} />\n        </Form.Item>\n        <Form.Item>\n          <Button type=\"primary\" onClick={handleUpdateUser}>提交</Button>\n        </Form.Item>\n      </Form>\n      <Divider orientation=\"left\">Server酱配置</Divider>\n      <Form layout=\"vertical\" style={{ width: '300px' }}>\n        <Form.Item label=\"SCKEY\">\n          <Input \n            maxLength={100} \n            value={sckey} \n            onChange={e => setSckey(e.target.value)} \n          />\n          <div style={{ textAlign: 'right', marginTop: '5px' }}>\n            <a href=\"http://sc.ftqq.com\" target=\"_blank\" rel=\"noopener noreferrer\">如何获取？</a>\n          </div>\n        </Form.Item>\n        <Form.Item>\n          <Button type=\"primary\" onClick={handleSckey}>提交</Button>\n        </Form.Item>\n      </Form>\n    </div>\n  )\n};\n\nconst mapStateToProps = ({ user }: StoreState): { userInfo: UserInfoProps } => {\n  return { userInfo: user.userInfo };\n};\n\nexport default connect(mapStateToProps)(withRouter(Account));\n"],"sourceRoot":""}