{"version":3,"sources":["../node_modules/antd/es/divider/index.js","views/home/setting/account/index.tsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Divider","props","React","ConfigConsumer","_ref","_classNames","getPrefixCls","customizePrefixCls","prefixCls","_props$type","type","_props$orientation","orientation","className","children","dashed","restProps","orientationPrefix","concat","classString","classNames","role","connect","userInfo","user","withRouter","password","useFormInput","useState","sckey","setSckey","passwordValue","trim","handleUpdateUser","useCallback","message","warn","serviceUpdateUser","md5","handleSckey","serviceUpdateUserConfig","useEffect","serviceGetUserConfig","then","res","data","success","serverChanSckey","layout","style","width","Item","label","defaultValue","loginName","readOnly","disabled","maxLength","onClick","onChange","textAlign","marginTop","href","rel"],"mappings":"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","file":"static/js/6.eb38c99b.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Divider = function Divider(props) {\n  return /*#__PURE__*/React.createElement(ConfigConsumer, null, function (_ref) {\n    var _classNames;\n\n    var getPrefixCls = _ref.getPrefixCls;\n\n    var customizePrefixCls = props.prefixCls,\n        _props$type = props.type,\n        type = _props$type === void 0 ? 'horizontal' : _props$type,\n        _props$orientation = props.orientation,\n        orientation = _props$orientation === void 0 ? 'center' : _props$orientation,\n        className = props.className,\n        children = props.children,\n        dashed = props.dashed,\n        restProps = __rest(props, [\"prefixCls\", \"type\", \"orientation\", \"className\", \"children\", \"dashed\"]);\n\n    var prefixCls = getPrefixCls('divider', customizePrefixCls);\n    var orientationPrefix = orientation.length > 0 ? \"-\".concat(orientation) : orientation;\n    var classString = classNames(className, prefixCls, \"\".concat(prefixCls, \"-\").concat(type), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-text\").concat(orientationPrefix), children), _defineProperty(_classNames, \"\".concat(prefixCls, \"-dashed\"), !!dashed), _classNames));\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      className: classString\n    }, restProps, {\n      role: \"separator\"\n    }), children && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-inner-text\")\n    }, children));\n  });\n};\n\nexport default Divider;","import React, { useCallback, useEffect, useState } from 'react';\nimport md5 from 'blueimp-md5';\nimport { connect } from 'react-redux';\nimport { StoreState } from '@/store';\nimport { UserInfoProps } from '@/store/reducers/user';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { useFormInput } from '@/hooks';\nimport { serviceUpdateUser, serviceGetUserConfig, serviceUpdateUserConfig } from '@/services';\nimport {\n  Form, Input, Button, message, Divider\n} from 'antd';\n\ntype Props = {\n  userInfo: UserInfoProps;\n}\n\nconst Account: React.FC<Props & RouteComponentProps> = function ({ userInfo }) {\n  const password = useFormInput('');\n  const [sckey, setSckey] = useState('');\n  const passwordValue = password.value.trim();\n\n  const handleUpdateUser = useCallback(() => {\n    if (passwordValue.length < 6) {\n      message.warn('密码至少6位');\n      return;\n    }\n    serviceUpdateUser({ password: md5(passwordValue) });\n  }, [passwordValue]);\n\n  const handleSckey = useCallback(() => {\n    if (!sckey) {\n      message.warn('请正确填写SCKEY');\n      return;\n    }\n\n    serviceUpdateUserConfig({ sckey });\n  }, [sckey]);\n\n  useEffect(() => {\n    serviceGetUserConfig()\n    .then(res => {\n      if (res.data.success) {\n        setSckey(res.data.data.serverChanSckey);\n      }\n    });\n  }, []);\n\n  return (\n    <div className=\"account-setting\">\n      <Divider orientation=\"left\">修改密码</Divider>\n      <Form layout=\"vertical\" style={{ width: '300px' }}>\n        <Form.Item label=\"登录名\">\n          <Input defaultValue={userInfo.loginName} readOnly disabled />\n        </Form.Item>\n        <Form.Item label=\"密码\">\n          <Input type=\"password\" maxLength={32} {...password} />\n        </Form.Item>\n        <Form.Item>\n          <Button type=\"primary\" onClick={handleUpdateUser}>提交</Button>\n        </Form.Item>\n      </Form>\n      <Divider orientation=\"left\">Server酱配置</Divider>\n      <Form layout=\"vertical\" style={{ width: '300px' }}>\n        <Form.Item label=\"SCKEY\">\n          <Input \n            maxLength={100} \n            value={sckey} \n            onChange={e => setSckey(e.target.value)} \n          />\n          <div style={{ textAlign: 'right', marginTop: '5px' }}>\n            <a href=\"http://sc.ftqq.com\" target=\"_blank\" rel=\"noopener noreferrer\">如何获取？</a>\n          </div>\n        </Form.Item>\n        <Form.Item>\n          <Button type=\"primary\" onClick={handleSckey}>提交</Button>\n        </Form.Item>\n      </Form>\n    </div>\n  )\n};\n\nconst mapStateToProps = ({ user }: StoreState): { userInfo: UserInfoProps } => {\n  return { userInfo: user.userInfo };\n};\n\nexport default connect(mapStateToProps)(withRouter(Account));\n"],"sourceRoot":""}